:root{
  --bg:#0b1220; --panel:#111827; --panel-2:#0f172a; --border:#1f2a44;
  --text:#e5e7eb; --muted:#94a3b8;
  --primary-1:#3B82F6; --primary-2:#22d3ee;
  --shadow:0 10px 30px rgba(0,0,0,.35);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  background:
    radial-gradient(1200px 600px at 20% -10%, #1e293b33 0%, transparent 60%),
    radial-gradient(1000px 500px at 80% -20%, #0ea5e933 0%, transparent 60%),
    var(--bg);
  color:var(--text);
}
/* Topo */
.topbar{position:sticky; top:0; z-index:10; display:flex; align-items:center; justify-content:space-between;
  padding:14px 16px; background:linear-gradient(180deg,var(--panel-2),transparent); backdrop-filter:blur(6px);
  border-bottom:1px solid var(--border)}
.brand{display:flex; gap:10px; align-items:center}
.logo{width:36px; height:36px; border-radius:50%; display:grid; place-items:center; color:#fff; font-weight:700;
  background:linear-gradient(135deg,#1E3A8A,#3B82F6); box-shadow:0 8px 18px rgba(59,130,246,.35)}
.brand-title{font-weight:600}
.brand-subtitle{font-size:12px; color:var(--muted)}
.topbar-actions{display:flex; gap:8px}
/* Botões */
.btn{--pad:10px 14px; padding:var(--pad); border-radius:14px; border:1px solid transparent; color:var(--text); background:transparent; cursor:pointer}
.btn.small{--pad:8px 12px; font-size:13px}
.btn.solid{color:#06121f; font-weight:600; background:linear-gradient(90deg,var(--primary-1),var(--primary-2)); box-shadow:0 10px 22px rgba(34,211,238,.25)}
.btn.outline{border-color:#2a3a5f}
.btn.pill{border-radius:999px}
.btn.danger{border-color:#7f1d1d; color:#f87171}
.chip{border:1px solid var(--border); padding:6px 10px; border-radius:999px; background:rgba(148,163,184,.08); color:var(--muted)}
/* Layout */
.main{position:relative; z-index:1; padding:12px 12px calc(80px + env(safe-area-inset-bottom, 0px)); max-width:980px; margin:0 auto}
.grid-widgets{display:grid; gap:12px; grid-template-columns:1fr}
.span-3{grid-column:1}
@media (min-width:700px){ .grid-widgets{grid-template-columns:repeat(2,1fr)} .span-3{grid-column:span 2} }
@media (min-width:1024px){ .grid-widgets{grid-template-columns:repeat(3,1fr)} .span-3{grid-column:span 3} }
/* Cards */
.card{background:linear-gradient(180deg,var(--panel),var(--panel-2)); border:1px solid var(--border); border-radius:18px; padding:14px; box-shadow:var(--shadow)}
.card .card-head{display:flex; align-items:center; justify-content:space-between; margin-bottom:10px}
.card-actions{display:flex; gap:10px; margin-top:12px}
.input-row{display:flex; gap:8px}
.input-row input{flex:1}
input,textarea,select{width:100%; background:rgba(148,163,184,.08); border:1px solid var(--border); color:var(--text); padding:10px 12px; border-radius:12px; outline:none}
textarea.notes{min-height:140px}
/* Listas, calendário */
.list{list-style:none; margin:10px 0 0; padding:0; display:grid; gap:8px}
.list li{display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:12px; background:rgba(148,163,184,.06); border:1px solid var(--border)}
.list li.done{opacity:.6; text-decoration:line-through}
.presence{display:flex; gap:8px; flex-wrap:wrap; margin:6px 0 10px}
.tag{border:1px solid var(--border); padding:6px 10px; border-radius:10px; background:rgba(148,163,184,.08); font-size:13px}
.cal-wrap{margin-top:6px}
.cal-head{display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:8px}
.cal-label{font-weight:600}
.icon-btn{border:1px solid var(--border); background:transparent; color:var(--text); border-radius:10px; padding:6px 10px; cursor:pointer}
.calendar{display:grid; grid-template-columns:repeat(7,1fr); gap:8px}
.cal-dow,.cal-day{border:1px solid var(--border); border-radius:12px; padding:8px; min-height:56px; background:rgba(148,163,184,.04)}
.cal-dow{font-size:12px; color:var(--muted); text-align:center; min-height:auto}
.cal-day .num{font-weight:600; font-size:14px}
.cal-day.has-att{outline:2px solid #22d3ee55}
.cal-day.today{background:linear-gradient(180deg,#0e1b33,#0b1324)}
/* Split */
.split{display:grid; grid-template-columns:1fr; gap:12px}
.sidebar{background:linear-gradient(180deg,var(--panel),var(--panel-2)); border:1px solid var(--border); border-radius:18px; padding:12px; box-shadow:var(--shadow)}
.sidebar-head{display:grid; gap:10px; margin-bottom:8px}
.nav-list{list-style:none; margin:0; padding:0; display:grid; gap:8px; max-height:40vh; overflow:auto}
.nav-list li button{width:100%; text-align:left; border:1px solid var(--border); background:rgba(148,163,184,.06); color:var(--text); padding:12px 14px; border-radius:12px; cursor:pointer}
.nav-list li button.active{outline:2px solid #22d3ee55}
.nav-list li.row{display:grid; grid-template-columns:1fr auto; align-items:center; gap:8px}
.nav-list .trash{border-color:#7f1d1d; color:#f87171; padding:8px 10px; border-radius:10px; background:transparent; cursor:pointer}
/* Chat */
.chat{display:grid; grid-template-rows:auto 1fr auto; height:60vh; border:1px solid var(--border); border-radius:18px; overflow:hidden; background:linear-gradient(180deg,var(--panel),var(--panel-2)); box-shadow:var(--shadow)}
@media (min-width:768px){ .chat{height:70vh} }
.chat-head{display:flex; gap:12px; align-items:center; padding:12px; border-bottom:1px solid var(--border)}
.chat-title{font-weight:600}
.messages{padding:14px; overflow:auto; display:flex; flex-direction:column; gap:8px; background:radial-gradient(900px 400px at 0% 0%, #1e293b25 0%, transparent 60%), radial-gradient(900px 400px at 100% 0%, #0ea5e925 0%, transparent 60%)}
.msg{align-self:flex-start; max-width:78%; padding:10px 12px; border-radius:14px; border:1px solid var(--border); background:rgba(148,163,184,.06)}
.msg.me{align-self:flex-end; background:linear-gradient(90deg,#1b2a44,#0b203d)}
.msg .meta{font-size:11px; color:var(--muted); margin-top:4px}
.attachment{display:inline-flex; gap:6px; align-items:center; border:1px solid var(--border); border-radius:10px; padding:4px 8px; font-size:12px; margin-top:6px}
.chat-input{display:flex; gap:10px; align-items:center; padding:10px; border-top:1px solid var(--border)}
.chat-input .attach{display:inline-grid; place-items:center; width:40px; height:40px; border-radius:12px; border:1px solid var(--border); background:rgba(148,163,184,.06); cursor:pointer; overflow:hidden}
.chat-input .attach input{display:none}
.chat-input input{flex:1}
.avatar{width:42px; height:42px; border-radius:50%; display:grid; place-items:center; font-weight:700; color:#06121f; background:linear-gradient(135deg,var(--primary-1),var(--primary-2))}
.avatar.bot{background:linear-gradient(135deg,#a7f3d0,#67e8f9)}
/* Navbar */
.navbar{position:fixed; bottom:max(10px, calc(env(safe-area-inset-bottom, 0px) + 10px)); left:50%; transform:translateX(-50%); display:flex; gap:8px; padding:8px; border-radius:16px; background:linear-gradient(180deg,var(--panel),var(--panel-2)); border:1px solid var(--border); box-shadow:var(--shadow); z-index:10}
.nav-btn{padding:10px 16px; border-radius:12px; border:1px solid var(--border); background:rgba(148,163,184,.06); color:var(--text); cursor:pointer}
.nav-btn.active{outline:2px solid #22d3ee55}
/* Reveal */
.reveal{opacity:0; transform:translateY(16px) scale(.98)}
.reveal.in{opacity:1; transform:translateY(0) scale(1); transition:transform .5s cubic-bezier(.22,.61,.36,1), opacity .5s ease}
.muted{color:var(--muted)} .tiny{font-size:12px}
/* ===== Page-turn 3D ===== */
.main{perspective:1400px; transform-style:preserve-3d; overflow:hidden}
.view{position:absolute; inset:0; opacity:0; pointer-events:none; backface-visibility:hidden; transform:translateZ(0); overflow-y:auto; -webkit-overflow-scrolling:touch}
.view.active{opacity:1; pointer-events:auto}
.view::before{content:""; position:absolute; inset:0; background:linear-gradient(90deg,rgba(0,0,0,.35),transparent 30%,transparent 70%,rgba(0,0,0,.25)); opacity:0; pointer-events:none}
.view.turn-enter{z-index:2} .view.turn-leave{z-index:1}
.view.turn-enter.from-right{animation:turnInRight 560ms cubic-bezier(.22,.61,.36,1) both}
.view.turn-leave.to-left{animation:turnOutLeft 560ms cubic-bezier(.22,.61,.36,1) both}
.view.turn-enter.from-left{animation:turnInLeft 560ms cubic-bezier(.22,.61,.36,1) both}
.view.turn-leave.to-right{animation:turnOutRight 560ms cubic-bezier(.22,.61,.36,1) both}
.view.turn-enter.from-right::before{animation:sheenEnterRight 560ms cubic-bezier(.22,.61,.36,1) both}
.view.turn-leave.to-left::before{animation:sheenLeaveRight 560ms cubic-bezier(.22,.61,.36,1) both}
.view.turn-enter.from-left::before{animation:sheenEnterLeft 560ms cubic-bezier(.22,.61,.36,1) both}
.view.turn-leave.to-right::before{animation:sheenLeaveLeft 560ms cubic-bezier(.22,.61,.36,1) both}
@keyframes turnInRight{0%{transform:rotateY(-88deg) translateX(12px);opacity:0}60%{opacity:1}100%{transform:rotateY(0) translateX(0);opacity:1}}
@keyframes turnOutLeft{0%{transform:rotateY(0) translateX(0);opacity:1}100%{transform:rotateY(88deg) translateX(-12px);opacity:0}}
@keyframes turnInLeft{0%{transform:rotateY(88deg) translateX(-12px);opacity:0}60%{opacity:1}100%{transform:rotateY(0) translateX(0);opacity:1}}
@keyframes turnOutRight{0%{transform:rotateY(0) translateX(0);opacity:1}100%{transform:rotateY(-88deg) translateX(12px);opacity:0}}
@keyframes sheenEnterRight{0%{opacity:.75;transform:translateX(-20%)}100%{opacity:0;transform:translateX(20%)}}
@keyframes sheenLeaveRight{0%{opacity:.55;transform:translateX(0)}100%{opacity:0;transform:translateX(20%)}}
@keyframes sheenEnterLeft{0%{opacity:.75;transform:translateX(20%) scaleX(-1)}100%{opacity:0;transform:translateX(-20%) scaleX(-1)}}
@keyframes sheenLeaveLeft{0%{opacity:.55;transform:translateX(0) scaleX(-1)}100%{opacity:0;transform:translateX(-20%) scaleX(-1)}}
#bubbles{position:fixed; inset:0; overflow:hidden; pointer-events:none; z-index:0}
#bubbles canvas{width:100%; height:100%; display:block}
.hidden{display:none}
.full{width:100%}
/* ===== FIX: altura real p/ as views e navegação ===== */
:root{
  --topbar-h: 64px;   /* altura do header */
  --navbar-h: 72px;   /* altura da barra inferior */
}

/* garante altura do topo e da navbar */
.topbar{ min-height: var(--topbar-h); }

.navbar{
  height: var(--navbar-h);
  align-items: center;
  padding: 8px;
}

/* 1) dá altura fixa pro container onde as .view ficam absolutas
   2) mantém padding inferior p/ não colidir com a navbar */
.main{
  height: calc(100vh - var(--topbar-h) - var(--navbar-h));
  padding: 12px 12px calc(var(--navbar-h) + 10px);
  max-width: 980px;
  margin: 0 auto;
  position: relative;
  perspective: 1400px;
  transform-style: preserve-3d;
  overflow: hidden; /* a .view faz o scroll vertical */
}

/* a .view continua scrollando verticalmente dentro da altura fixa acima */
.view{
  position: absolute;
  inset: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}
/* ====== Dialogs lindões (centrados, blur, scroll interno) ====== */
dialog{
  border:0;
  padding:0;
  background: transparent;
  inset:0;
}

dialog::backdrop{
  background:
    radial-gradient(1200px 700px at 50% -10%, rgba(59,130,246,.18), transparent 60%),
    rgba(3, 6, 15, .65);
  backdrop-filter: blur(6px);
}

dialog[open]{
  display:grid;
  place-items:center;
}

/* caixa base */
.modal{
  width: min(92vw, 560px);
  max-height: min(82vh, 780px);
  display:flex;
  flex-direction:column;
  background:linear-gradient(180deg, var(--panel), var(--panel-2));
  border:1px solid var(--border);
  border-radius:16px;
  box-shadow: var(--shadow);
  overflow:hidden;
}

/* variação um pouco maior (presenças) */
.modal-auth{
  width: min(94vw, 680px);
}

/* header fixo com blur */
.modal-head{
  position:sticky; top:0;
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; padding:12px 14px;
  background:linear-gradient(180deg, rgba(15,23,42,.85), rgba(15,23,42,.65));
  border-bottom:1px solid var(--border);
  backdrop-filter: blur(4px);
  z-index:1;
}

.modal-body{
  padding:14px;
  overflow:auto;              /* só o corpo rola */
}

/* campos dentro do modal */
.field{display:grid; gap:6px; margin:8px 0}
.field span{font-size:13px; color:var(--muted)}

/* botões do rodapé padrão */
.auth-actions{
  display:flex; gap:10px; justify-content:flex-end; margin-top:12px;
}

/* botão X */
.icon-btn{
  border:1px solid var(--border);
  background:transparent; color:var(--text);
  border-radius:10px; padding:6px 10px; cursor:pointer;
}

/* lista de presenças longa bonitinha */
.att-list{
  list-style:none; margin:10px 0 0; padding:0;
  display:grid; gap:8px;
  max-height:48vh;              /* limita altura e cria scroll interno */
  overflow:auto;
  border:1px solid var(--border);
  border-radius:12px;
  background:rgba(148,163,184,.04);
}
.att-list li{
  display:flex; align-items:center; gap:10px;
  padding:10px 12px; border-bottom:1px solid rgba(255,255,255,.04);
}
.att-list li:last-child{border-bottom:0}

/* inputs do modal seguem o tema */
.modal input, .modal select, .modal textarea{
  width:100%; background:rgba(148,163,184,.08);
  border:1px solid var(--border); color:var(--text);
  padding:10px 12px; border-radius:12px; outline:none;
}

/* evita scrollbar lateral gigante no body quando abre dialog */
body:has(dialog[open]){ overflow:hidden }
