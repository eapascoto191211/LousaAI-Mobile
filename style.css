:root{
  --bg:#0b1220; --fg:#e7eefb; --muted:#9bb3cf;
  --glass:rgba(255,255,255,.08); --glass-strong:rgba(255,255,255,.16);
  --accent:#6ac1ff; --accent-2:#8fffde; --danger:#ff6a7a;
  --r-btn:20px; --r-card:22px; --r-chip:14px;
  --fs: clamp(16px, 4.6vw, 18px);
}
:root[data-theme="light"]{
  --bg:#eef3fb; --fg:#0f172a; --muted:#5f6f86;
  --glass:rgba(255,255,255,.65); --glass-strong:rgba(255,255,255,.88);
  --accent:#2563eb; --accent-2:#10b981;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  font:400 var(--fs)/1.35 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--bg); color:var(--fg); -webkit-tap-highlight-color:transparent;
}
.muted{color:var(--muted)} .hidden{display:none!important}
main{padding:12px 12px calc(220px + env(safe-area-inset-bottom,0))}
.theme-fx{position:fixed; inset:0; pointer-events:none; opacity:0; transition:opacity .28s;
  background:radial-gradient(1200px 1200px at 50% 50%, rgba(255,255,255,.55), transparent)}
.theme-fx.on{opacity:1}
*:focus-visible{outline:2px solid var(--accent); outline-offset:3px; border-radius:12px}

/* >>> REGRAS DE ABA (agora com transições) <<< */
.tab{ display:none; }
.tab.active{ display:block; }
.tab.entering{ animation:tabIn .38s cubic-bezier(.18,.9,.2,1.24) both; }
.tab.leaving{ animation:tabOut .26s ease both; }
@keyframes tabIn{ 
  from{opacity:.02; transform:translateX(16px) scale(.98); filter:blur(2px)} 
  to{opacity:1; transform:none; filter:none} 
}
@keyframes tabOut{ 
  from{opacity:1; transform:none; filter:none} 
  to{opacity:0; transform:translateX(-14px) scale(.985); filter:blur(2px)} 
}

/* header */
.m-header{position:sticky; top:0; z-index:20; margin:10px; padding:10px; border-radius:18px; backdrop-filter:blur(16px)}
.brand{display:flex; align-items:center; gap:10px}
.dot{width:36px;height:36px;border-radius:999px;background:#19b3ff;color:#002234;display:grid;place-items:center;font-weight:900}
.brand-txt small{display:block; margin-top:2px}
.actions{display:flex; gap:8px}

/* glass */
.glass{background:var(--glass); border:1px solid rgba(255,255,255,.18);
  border-radius:var(--r-card); backdrop-filter:blur(16px) saturate(1.1); box-shadow:inset 0 1px rgba(255,255,255,.12)}
.glass-strong{background:var(--glass-strong); border:1px solid rgba(255,255,255,.24);
  border-radius:calc(var(--r-card) - 2px); backdrop-filter:blur(18px) saturate(1.15)}

/* utils */
.vstack{display:grid} .hstack{display:flex; align-items:center}
.gap-8{gap:8px} .gap-10{gap:10px}
.row{display:flex; gap:10px; align-items:center}
.flex-1{flex:1} .full{width:100%}

/* cards / widgets */
.widgets{display:grid; gap:12px}
.card{padding:14px}
.card-head{display:flex; align-items:center; justify-content:space-between; margin-bottom:10px}
.date-badge{width:54px;height:54px;border-radius:14px;display:grid;place-items:center;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.24)}
.date-badge b{font-size:18px;line-height:1}
.date-badge span{font-size:12px;opacity:.8}

.list{display:grid; gap:10px}
.list-item{display:flex; justify-content:space-between; gap:10px; padding:10px 12px; border-radius:18px; background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.2)}

/* inputs / chips / buttons */
.input{width:100%; padding:14px 16px; border-radius:20px; border:1px solid rgba(255,255,255,.22); background:rgba(255,255,255,.08); color:var(--fg)}
.textarea{min-height:120px; resize:vertical}
.chip{position:relative; overflow:hidden; padding:10px 12px; border-radius:16px; border:1px solid rgba(255,255,255,.24); background:rgba(255,255,255,.14); color:var(--fg)}
.pill{padding:8px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.24); background:rgba(255,255,255,.12)}
.chip.danger{background:rgba(255,60,60,.18); border-color:rgba(255,60,60,.35); color:#ffc0c5}
.btn-primary,.btn-ghost,.d-btn{
  position:relative; overflow:hidden;
  min-height:48px; padding:14px 16px; border-radius:20px; border:1px solid transparent; font-weight:800;
}
.btn-primary{background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#001; border-color:rgba(255,255,255,.55)}
.btn-ghost{
  color:var(--fg);
  background:linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.30)) padding-box,
             linear-gradient(135deg,var(--accent),var(--accent-2)) border-box;
  border:1px solid transparent;
}

/* RIPPLE (toque nos botões) */
.ripple{
  position:absolute; border-radius:50%; pointer-events:none; inset:auto;
  transform:translate(-50%,-50%); width:10px; height:10px; opacity:.35;
  background:radial-gradient(circle, #fff, rgba(255,255,255,0) 60%);
  animation:ripple .6s ease-out forwards;
  mix-blend-mode:screen;
}
@keyframes ripple{
  from{transform:translate(-50%,-50%) scale(.3); opacity:.45}
  to{transform:translate(-50%,-50%) scale(18); opacity:0}
}

/* classroom */
.t-grid{display:grid; gap:12px}
.t-card{padding:14px}
.t-top{display:flex; gap:10px; align-items:center; margin-bottom:8px}
.avatar{width:44px;height:44px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#001; display:grid; place-items:center; font-weight:900}
.t-name{font-weight:900} .t-meta{font-size:12px}

/* chat */
.ai{display:grid; gap:12px}
.chat{height:48dvh; overflow:auto; display:grid; gap:10px; padding:10px; border:1px solid rgba(255,255,255,.2); border-radius:18px; background:rgba(255,255,255,.06)}
.msg{display:flex} .msg.me{justify-content:flex-end}
.bubble{max-width:80%; padding:12px 14px; border-radius:18px; background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.22)}
.msg.me .bubble{background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#001; font-weight:900}
.composer .bar{display:flex; gap:8px; padding:10px; border:1px solid rgba(255,255,255,.22); border-radius:22px; background:rgba(255,255,255,.08)}
.c-input{flex:1; background:transparent; border:none; color:var(--fg); outline:none}

/* dock */
.dock{
  position:fixed; left:50%; bottom:calc(18px + env(safe-area-inset-bottom,0)); transform:translateX(-50%);
  width:min(96vw,560px); display:grid; grid-template-columns:repeat(3,1fr); gap:10px; padding:10px; border-radius:26px;
  background:linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.08));
  border:1px solid rgba(255,255,255,.3); backdrop-filter:blur(14px);
  z-index:9999; pointer-events:auto; isolation:isolate;
}
.dock *, .dock::before, .dock::after{pointer-events:auto}
.d-btn{background:rgba(0,0,0,.28); color:var(--fg); border:1px solid rgba(255,255,255,.24)}
.d-btn.active{
  background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#001; border-color:rgba(255,255,255,.6);
  background-size:200% 200%;
  animation:moveGrad 3s linear infinite;
}
@keyframes moveGrad{ 
  0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%}
}

/* modais — animação destacada */
.modal{position:fixed; inset:0; display:grid; place-items:center; z-index:100}
.modal.hidden{display:none}
.scrim{
  position:absolute; inset:0; backdrop-filter:blur(3px); background:rgba(0,0,0,.0); opacity:0;
}
.modal.show .scrim{ animation:scrimIn .28s ease forwards }
@keyframes scrimIn{ from{opacity:0; background:rgba(0,0,0,.0)} to{opacity:1; background:rgba(0,0,0,.45)} }
.sheet{
  position:relative; width:min(560px,92vw); border-radius:22px; padding:14px; 
  /* “respirar” bem leve */
  animation:breathe 3.6s ease-in-out 1s infinite alternate both;
}
@keyframes breathe{
  from{ box-shadow:0 20px 70px rgba(0,0,0,.45), inset 0 1px rgba(255,255,255,.12) }
  to{ box-shadow:0 28px 90px rgba(0,0,0,.58), inset 0 1px rgba(255,255,255,.18) }
}
.sheet-head{display:flex; align-items:center; justify-content:space-between; margin-bottom:10px}
.sheet-actions{display:flex; gap:8px; justify-content:flex-end; margin-top:8px}

/* pop “mais detalhada” (spring + leve rotação) */
@media (pointer:coarse){
  .modal .sheet{
    transform-origin:var(--origin-x,50%) var(--origin-y,50%);
    transform:translateY(6px) scale(.82) rotate(.6deg);
    opacity:0;
  }
  .modal.show .sheet{ animation:popSpring .52s cubic-bezier(.2,1.3,.2,1) forwards }
  @keyframes popSpring{
    0%{transform:translateY(10px) scale(.82) rotate(.6deg); opacity:.02; filter:blur(2px)}
    60%{transform:translateY(-2px) scale(1.04) rotate(0deg); opacity:1; filter:none}
    80%{transform:translateY(0) scale(.98)}
    100%{transform:translateY(0) scale(1)}
  }
}

/* toast */
.toast{position:fixed; left:50%; bottom:calc(100px + env(safe-area-inset-bottom,0)); transform:translateX(-50%) translateY(20px); opacity:0; padding:10px 14px; border-radius:18px; background:rgba(0,0,0,.65); color:#fff; transition:.28s}
.toast.show{opacity:1; transform:translateX(-50%) translateY(0)}
.toast.hidden{display:none}

/* menos motion */
@media (prefers-reduced-motion:reduce){ *{animation:none!important; transition:none!important} }
